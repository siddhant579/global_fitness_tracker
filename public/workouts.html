<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sanghamitra Fitness Tracker</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(to right, #1e3c72, #2a5298);
            color: #ffffff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            margin-top: 30px;
            font-size: 36px;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5);
        }

        h2 {
            color: #b2ebf2;
            font-weight: normal;
            margin-bottom: 10px;
        }

        form {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            margin-top: 20px;
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #e0f7fa;
        }

        input[type="text"],
        input[type="date"],
        input[type="number"],
        select {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            background-color: rgba(255, 255, 255, 0.9);
            color: #333;
        }

        button {
            background-color: #00bfa5;
            color: white;
            border: none;
            padding: 14px 0;
            font-size: 16px;
            border-radius: 12px;
            width: 100%;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #008e76;
        }

        table {
            width: 90%;
            max-width: 800px;
            margin-top: 40px;
            background: rgba(255, 255, 255, 0.1);
            border-collapse: collapse;
            color: #ffffff;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }

        th {
            background-color: rgba(0, 191, 165, 0.7);
        }

        @media screen and (max-width: 480px) {
            h1 {
                font-size: 28px;
            }
        }
    </style>
</head>
<body>

    <h1>Sanghamitra Fitness Tracker</h1>
    <h2>Enter Your Workout</h2>

    <form id="workout-form">
        <label for="name">Name</label>
        <input type="text" id="name" name="name" required>

        <label for="date">Date</label>
        <input type="date" id="date" name="date" required>

        <label for="exercise">Exercise</label>
        <select id="exercise" name="exercise" required>
            <option value="" disabled selected>Select exercise</option>
            <option value="Walking">üö∂ Walking</option>
            <option value="Running">üèÉ Running</option>
            <option value="Cycling">üö¥ Cycling</option>
            <option value="Swimming">üèä Swimming</option>
            <option value="Weight Training">üèãÔ∏è Weight Training</option>
            <option value="Yoga">üßò Yoga</option>
            <option value="Other">‚ú® Other</option>
        </select>

        <label for="duration">Duration (min)</label>
        <input type="number" id="duration" name="duration" required>

        <label for="weight">Weight (kg)</label>
        <input type="number" step="0.1" id="weight" name="weight">

        <button type="submit">Submit</button>
    </form>

    <h2>Workout History</h2>
    <table id="workoutTable">
        <thead>
            <tr>
                <th>Name</th>
                <th>Date</th>
                <th>Exercise</th>
                <th>Duration (min)</th>
                <th>Weight (kg)</th>
                <th>Calories</th>
            </tr>
        </thead>
        <tbody>
            <!-- Workout rows will be appended here -->
        </tbody>
    </table>

    <script>
        // Submit Workout Form
        document.getElementById('workout-form').addEventListener('submit', function (e) {
            e.preventDefault();

            const workout = {
                name: document.getElementById('name').value,
                date: document.getElementById('date').value,
                exercise: document.getElementById('exercise').value,
                duration: parseInt(document.getElementById('duration').value),
                weight: parseFloat(document.getElementById('weight').value) || null
            };

            fetch('/api/workouts', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(workout)
            })
            .then(res => {
                if (!res.ok) throw new Error("Failed to save workout");
                return res.json();
            })
            .then(data => {
                alert("Workout saved to MongoDB!");
                location.reload();
            })
            .catch(err => alert("Error: " + err.message));
        });

        // Fetch and Display Workouts
        fetch('https://fitness-backend.onrender.com/api/workouts')
        .then(res => res.json())
        .then(data => {
            data.forEach(w => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${w.name}</td>
                    <td>${w.date}</td>
                    <td>${w.exercise}</td>
                    <td>${w.duration}</td>
                    <td>${w.weight ?? '-'}</td>
                    <td>${w.calories ?? '-'}</td>
                `;
                document.querySelector('#workoutTable tbody').appendChild(row);
            });
        });
    </script>

</body>
</html>
